import{y as R,z as G,l as x,G as H,w as D,u as K,C as U,A as P,H as I,p as _,I as Q}from"./base-2tROEyUa.js";function k(e){return R()?(G(e),!0):!1}function C(e){return typeof e=="function"?e():K(e)}const q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const B=Object.prototype.toString,X=e=>B.call(e)==="[object Object]",Y=()=>{};function Z(e,n){function t(...o){return new Promise((l,d)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(l).catch(d)})}return t}const T=e=>e();function ee(e=T){const n=x(!0);function t(){n.value=!1}function o(){n.value=!0}const l=(...d)=>{n.value&&e(...d)};return{isActive:H(n),pause:t,resume:o,eventFilter:l}}function te(e){return I()}function ne(e,n,t={}){const{eventFilter:o=T,...l}=t;return D(e,Z(o,n),l)}function z(e,n,t={}){const{eventFilter:o,...l}=t,{eventFilter:d,pause:s,resume:p,isActive:A}=ee(o);return{stop:ne(e,n,{...l,eventFilter:d}),pause:s,resume:p,isActive:A}}function re(e,n=!0,t){te()?U(e,t):n?e():P(e)}const N=q?window:void 0;function ie(e){var n;const t=C(e);return(n=t==null?void 0:t.$el)!=null?n:t}function j(...e){let n,t,o,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,l]=e,n=N):[n,t,o,l]=e,!n)return Y;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const d=[],s=()=>{d.forEach(h=>h()),d.length=0},p=(h,c,v,w)=>(h.addEventListener(c,v,w),()=>h.removeEventListener(c,v,w)),A=D(()=>[ie(n),C(l)],([h,c])=>{if(s(),!h)return;const v=X(c)?{...c}:c;d.push(...t.flatMap(w=>o.map(O=>p(h,w,O,v))))},{immediate:!0,flush:"post"}),b=()=>{A(),s()};return k(b),b}const F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$="__vueuse_ssr_handlers__",oe=se();function se(){return $ in F||(F[$]=F[$]||{}),F[$]}function ae(e,n){return oe[e]||n}function ue(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const le={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},V="vueuse-storage";function fe(e,n,t,o={}){var l;const{flush:d="pre",deep:s=!0,listenToStorageChanges:p=!0,writeDefaults:A=!0,mergeDefaults:b=!1,shallow:h,window:c=N,eventFilter:v,onError:w=i=>{console.error(i)},initOnMounted:O}=o,g=(h?Q:x)(typeof n=="function"?n():n);if(!t)try{t=ae("getDefaultStorage",()=>{var i;return(i=N)==null?void 0:i.localStorage})()}catch(i){w(i)}if(!t)return g;const m=C(n),a=ue(m),r=(l=o.serializer)!=null?l:le[a],{pause:u,resume:S}=z(g,()=>J(g.value),{flush:d,deep:s,eventFilter:v});c&&p&&re(()=>{t instanceof Storage?j(c,"storage",E):j(c,V,M),O&&E()}),O||E();function W(i,f){if(c){const y={key:e,oldValue:i,newValue:f,storageArea:t};c.dispatchEvent(t instanceof Storage?new StorageEvent("storage",y):new CustomEvent(V,{detail:y}))}}function J(i){try{const f=t.getItem(e);if(i==null)W(f,null),t.removeItem(e);else{const y=r.write(i);f!==y&&(t.setItem(e,y),W(f,y))}}catch(f){w(f)}}function L(i){const f=i?i.newValue:t.getItem(e);if(f==null)return A&&m!=null&&t.setItem(e,r.write(m)),m;if(!i&&b){const y=r.read(f);return typeof b=="function"?b(y,m):a==="object"&&!Array.isArray(y)?{...m,...y}:y}else return typeof f!="string"?f:r.read(f)}function E(i){if(!(i&&i.storageArea!==t)){if(i&&i.key==null){g.value=m;return}if(!(i&&i.key!==e)){u();try{(i==null?void 0:i.newValue)!==r.write(g.value)&&(g.value=L(i))}catch(f){w(f)}finally{i?P(S):S()}}}}function M(i){E(i.detail)}return g}function pe(e="history",n={}){const{initialValue:t={},removeNullishValues:o=!0,removeFalsyValues:l=!1,write:d=!0,window:s=N}=n;if(!s)return _(t);const p=_({});function A(){if(e==="history")return s.location.search||"";if(e==="hash"){const a=s.location.hash||"",r=a.indexOf("?");return r>0?a.slice(r):""}else return(s.location.hash||"").replace(/^#/,"")}function b(a){const r=a.toString();if(e==="history")return`${r?`?${r}`:""}${s.location.hash||""}`;if(e==="hash-params")return`${s.location.search||""}${r?`#${r}`:""}`;const u=s.location.hash||"#",S=u.indexOf("?");return S>0?`${u.slice(0,S)}${r?`?${r}`:""}`:`${u}${r?`?${r}`:""}`}function h(){return new URLSearchParams(A())}function c(a){const r=new Set(Object.keys(p));for(const u of a.keys()){const S=a.getAll(u);p[u]=S.length>1?S:a.get(u)||"",r.delete(u)}Array.from(r).forEach(u=>delete p[u])}const{pause:v,resume:w}=z(p,()=>{const a=new URLSearchParams("");Object.keys(p).forEach(r=>{const u=p[r];Array.isArray(u)?u.forEach(S=>a.append(r,S)):o&&u==null||l&&!u?a.delete(r):a.set(r,u)}),O(a)},{deep:!0});function O(a,r){v(),r&&c(a),s.history.replaceState(s.history.state,s.document.title,s.location.pathname+b(a)),w()}function g(){d&&O(h(),!0)}j(s,"popstate",g,!1),e!=="history"&&j(s,"hashchange",g,!1);const m=h();return m.keys().next().value?c(m):Object.assign(p,t),p}export{pe as a,fe as u};
